<!DOCTYPE HTML>
<html>
<head>
		<title>Suivre</title>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
 

		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" />
		<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css" />
		<link rel="stylesheet" href="vendor/waves/waves.min.css" />
		<!-- <link rel="stylesheet" href="vendor/wow/animate.css" /> -->
		<link rel="stylesheet" href="css/nativedroid2.css" />

		<meta name="mobile-web-app-capable" content="yes">
	 	<meta name="apple-mobile-web-app-capable" content="yes" />
    	<meta name="apple-mobile-web-app-status-bar-style" content="black" />

    	  <script>
              var userAgent = navigator.userAgent + '';
              if (userAgent.indexOf('iPhone') > -1) {
                document.write('<script src="js/cordova-iphone.js"></sc' + 'ript>');
                var mobile_system = 'iphone';
              } else if (userAgent.indexOf('Android') > -1) {
                document.write('<script src="js/cordova-android.js"></sc' + 'ript>');
                var mobile_system = 'android';
              } else {
                var mobile_system = '';
              }
         </script>
     
    <style>
					/* Prevent FOUC */
					body { opacity: 0; }
				</style>
	</head>
	<body onload="getDevices()">

		<div data-role="page">

			<nd2-include data-src="panel.left.html"></nd2-include>

			<div data-role="panel" id="bottomsheet" data-animate="false" data-position='bottom' data-display="overlay">
				<nd2-include data-src="bottom.sheet.html"></nd2-include>
			</div>

			<div data-role="header" data-position="fixed" >
				<a href="#bottomsheet" class="ui-btn ui-btn-right wow fadeIn" data-wow-delay='1.2s'><i class="zmdi zmdi-more-vert"></i></a>
				<a href="#leftpanel" class="ui-btn ui-btn-left wow fadeIn" data-wow-delay='0.1s'><i class="zmdi zmdi-menu"></i></a>
				<h1 class="wow fadeIn" data-wow-delay='0.2s'>Suivre</h1>
			</div>

			<div role="main" class="ui-content" data-inset="false">
				<ul data-role="listview" data-icon="false">
				<li data-role="list-divider">
					Devices
				</li>
				<div id="devices">
			<!-- 	<div class="row">

					<div class="col-xs-6">
						<div class="box">


							<!-- Media Overlay no Background !-->

							<!-- <div class="nd2-card">

								<a href="devicepage.html" >
								<div class="card-media">
									<img src="img/laptop.jpg">

									<div class='card-media-overlay'>

										<div class="card-title has-supporting-text">
											<h3 class="nd2-subhead clr-white">HP laptop</h3>
										</div>

									</div>

								</div>
							</a>


								<div class="card-action">
									
									<div class="row between-xs">
										<div class="col-xs-12 align-right">
											<div class="box">
												<!-- <a href="devicepage.html" class="ui-btn ui-btn-inline">VIEW</a> -->
												<!-- <a href="editdevice.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-edit '></i></a>
												<a href="#delete" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-delete '></i></a>
												<a href="map.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-pin clr-red'></i></a>
												
											</div>
										</div>
									
									</div>
								</div>

							</div>


						</div>
					</div>

					<div class="col-xs-6">
						<div class="box"> -->

							<!-- Media Overlay no Background !-->

							<!-- <div class="nd2-card">


								<a href="devicepage.html" >
								<div class="card-media">
									<img src="img/laptop.jpg">

									<div class='card-media-overlay'>

										<div class="card-title has-supporting-text">
											<h3 class="nd2-subhead clr-white">Iphone 6</h3>

										</div>

									</div>

								</div> -->
								<!-- 	<h6 class="card-supporting-text ">
										Location: Library
									</h6> -->

						<!-- 		<div class="card-action">
									<div class="row between-xs">
										<div class="col-xs-12 align-right">
											
											<div class="box">
												<a href="editdevice.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-edit '></i></a>
												<a href="#delete" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-delete '></i></a>
												<a href="map.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-pin clr-red'></i></a>	
											</div>
										</div>
									</div>
								</div>

							</div>


						</div>
					</div>

				</div>
				<div class="row">

					<div class="col-xs-6">
						<div class="box">
 -->

							<!-- Media Overlay no Background !-->

							<!-- <div class="nd2-card"> -->
<!-- 

								<a href="devicepage.html" >
								<div class="card-media">
									<img src="img/laptop.jpg">

									<div class='card-media-overlay'>

										<div class="card-title has-supporting-text">
											<h3 class="nd2-subhead clr-white">HP laptop</h3>
										</div>

									</div>

								</div>


								<div class="card-action">
									<div class="row between-xs">
										<div class="col-xs-12 align-right">
											<div class="box">
												<a href="editdevice.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-edit '></i></a>
												<a href="#delete" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-delete '></i></a>
												<a href="map.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-pin clr-red'></i></a>	
												
											</div>
										</div>
									</div>
								</div>

							</div>


						</div>
					</div>

					<div class="col-xs-6">
						<div class="box"> -->

							<!-- Media Overlay no Background !-->

							<!-- <div class="nd2-card">


								<a href="devicepage.html" >
								<div class="card-media">
									<img src="img/laptop.jpg">

									<div class='card-media-overlay'>

										<div class="card-title has-supporting-text">
											<h3 class="nd2-subhead clr-white">Iphone 6</h3>

										</div>

									</div>

								</div> -->
								<!-- 	<h6 class="card-supporting-text ">
										Location: Library
									</h6> -->

								<!-- <div class="card-action">
									<div class="row between-xs">
										<div class="col-xs-12 align-right">
											
											<div class="box">
												<a href="editdevice.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-edit '></i></a>
												<a href="#delete" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-delete '></i></a>
												<a href="map.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-pin clr-red'></i></a>						
											</div>
										</div>
									</div>
								</div>

							</div>


						</div>
					</div>

				</div>
				<div class="row">

					<div class="col-xs-6">
						<div class="box"> -->


							<!-- Media Overlay no Background !-->

							<!-- <div class="nd2-card">


								<div class="card-media">
									<img src="img/laptop.jpg">

									<div class='card-media-overlay'>

										<div class="card-title has-supporting-text">
											<h3 class="nd2-subhead clr-white">HP laptop</h3>
										</div>

									</div>

								</div>


								<div class="card-action">
									<div class="row between-xs">
										<div class="col-xs-12 align-right">
											<div class="box">
												<a href="editdevice.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-edit '></i></a>
												<a href="#delete" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-delete '></i></a>
												<a href="map.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-pin clr-red'></i></a>	
												
											</div>
										</div>
									</div>
								</div>

							</div>


						</div>
					</div>

					<div class="col-xs-6">
						<div class="box"> -->

							<!-- Media Overlay no Background !-->
<!-- 
							<div class="nd2-card">


								<div class="card-media">
									<img src="img/laptop.jpg">

									<div class='card-media-overlay'>

										<div class="card-title has-supporting-text">
											<h3 class="nd2-subhead clr-white">Iphone 6</h3>

										</div>

									</div>

								</div> -->
								<!-- 	<h6 class="card-supporting-text ">
										Location: Library
									</h6> <a href="#popupDialog" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop"><i class='lIcon fa fa-external-link'></i> Open popup dialog</a>-->


						<!-- 		<div class="card-action">
									<div class="row between-xs">
										<div class="col-xs-12 align-right">
											
											<div class="box">

												<a href="editdevice.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-edit '></i></a>
												<a href="#delete" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-delete '></i></a>
												<a href="map.html" class="ui-btn ui-btn-inline ui-btn-fab"><i class='zmdi zmdi-pin clr-red'></i></a>								
											</div>
										</div>
									</div>
								</div>

							</div>


						</div>
					</div>

				</div> -->
		<!-- 	</div>  -->
				<!-- <li>
					<a href="devicepage.html">
						<img src="img/phone.jpg" class="ui-thumbnail ui-thumbnail-circular" />
						<h2>iphone 6</h2>
						<p><button class="ui-btn ui-btn-inline ui-btn-fab ui-mini"><i class='zmdi zmdi-pin zmd-2x clr-red'></i></button>Current location: Library</p>
					</a>
				</li>
				<li>
					<a href="devicepage.html">
						<img src="img/laptop.jpg" class="ui-thumbnail ui-thumbnail-circular" />
						<h2>HP 2016</h2>
						<p><button class=" ui-btn ui-btn-inline ui-btn-fab ui-mini "><i class="zmdi zmdi-pin zmd-2x clr-red"></i></button>Current location: Big ben cafetaria</p>
					</a>
				</li>
				<li>
					<a href="devicepage.html">
						<img src="img/dress.jpg" class="ui-thumbnail ui-thumbnail-circular" />
						<h2>Polker dot dress</h2>
						<p><button class=" ui-btn ui-btn-inline ui-btn-fab ui-mini "><i class="zmdi zmdi-pin zmd-2x clr-red"></i></button>Current location: Hostel</p>

					</a>
				</li> -->
			</ul>
			<div data-role="popup" id="delete">

                <div data-role="header">
                	<h1 class='nd-title'>Confirm delete</h1>
            	</div>

                <div data-role="content">
                    <p>Are you sure you want to delete this device?</p>
                    <button onclick="continueDelete()" data-rel="back" data-role="button" data-inline="true" class="ui-btn ui-btn-primary"><i class='zmdi zmdi-check'></i> Yes</button>
                    <button data-rel="back" data-role="button" data-inline="true" class="ui-btn ui-btn-primary"><i class='zmdi zmdi-cancel'></i> No</button>

                </div>
            </div>

			</div>

		</div>

		<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
		<script src="vendor/waves/waves.min.js"></script>
		<script src="vendor/wow/wow.min.js"></script>
		<script src="js/nativedroid2.js"></script>
		<script src="nd2settings.js"></script>
		<script>
				fullname.innerHTML=localStorage.getItem("firstname")+" "+localStorage.getItem("lastname");
				useremail.innerHTML=localStorage.getItem("email");
		</script>
		<script type="text/javascript">


			new $.nd2Search({
						placeholder : "Search",
	          defaultIcon : "globe-alt",
	          source : [
	              {"label": "iphone", "value": "IP"},
	              {"label": "Red Polker Dot dress", "value": "RD"},
	              {"label": "HP laptop", "value": "HP"},
	             
	          ],
	          fn : function(result) {
	            console.log('--- Your custom handling ---');
	            console.log('you picked: ');
	            console.log(result);
	          }
			});

		</script>
		<script>
		var newdeviceid="";

		 //document.getElementById("editdevice").addEventListener("click", editdevice);

			function continueDelete(){
			
			}

			

		   function editdevice(deviceid,name,description,tagidentification,locationid,image){
		   //window.location.href=editdevice.html";

		   	window.location.href="editdevice.html?deviceid="+deviceid+"&name="+name+"&description="+description+"&tagidentification="+tagidentification+"&locationid="+locationid+"&image="+image;

		  
		   }

		   function viewDevice(deviceid,name,description,tagidentification,locationid,image){
		   //window.location.href=editdevice.html";

		   	window.location.href="devicepage.html?deviceid="+deviceid+"&name="+name+"&description="+description+"&tagidentification="+tagidentification+"&locationid="+locationid+"&image="+image;

		  
		   }

		   function deleteDevice(deviceid,name,description,tagidentification,locationid,image){
		   	//window.location.href=editdevice.html";
		   	// window.location.href="deletedevice.html?deviceid="+deviceid+"&name="+name+"&description="+description+"&tagidentification="+tagidentification+"&locationid="+locationid+"&image="+image;
		   		// newdeviceid=deviceid;
		   		var ajaxPageUrl="http://35.166.18.143/~efua.bainson/ajaxPage.php?cmd=6&deviceid="+deviceid;
		  		
		      $.ajax(ajaxPageUrl,{
		        async:true,
		        complete:deleteComplete
		      });
		   		
		   }


            function deleteComplete(xhr,status){
                if(status!="success"){
                  divStatus.innerHTML="error while adding user";
                  return;
                }
                else{
                  var obj=JSON.parse(xhr.responseText);
                  if(obj.result==0){
                    alert(obj.message);
                  }
                  else{
                    // alert(obj.message);
                   
		          	window.location.href="landingpage.html";
                   
                    new $.nd2Toast({ // The 'new' keyword is important, otherwise you would overwrite the current toast instance
                       message : "Deletion successful", // Required
                       action : { // Optional (Defines the action button on the right)
                         title : "", // Title of the action button
                         link : "", // optional (either link or fn or both must be set to define an action)
                         fn : function() { // function that will be triggered when action clicked
                            console.log("Action Button clicked'");
                         },
                         color : "red" // optional color of the button (default: 'lime')
                       },
                       ttl : 8000 // optional, time-to-live in ms (default: 3000)
                     });
                 
                 }
                  
              }
            }

              function getDevices(){
		
		      var ajaxPageUrl="http://35.166.18.143/~efua.bainson/ajaxPage.php?cmd=4";
		  		
		      $.ajax(ajaxPageUrl,{
		        async:true,
		        complete:getDevicesComplete
		      });
		   }

			function getDevicesComplete(xhr,status){
		        if(status!="success"){
		          alert("Error during login");
		          return;
		        }
		        else{
		          var obj=JSON.parse(xhr.responseText);
		         
		          if(obj.result==0){
		            alert(obj.message);
		          }
		          else{
		             var result="";
		              var length=obj.device.length;
		              
		              while(length>0){
		              	if(length==1){
		              		result+="<div class='row'><div class='col-xs-6'><div class='box'><div class='nd2-card'><a href='#' onclick='viewDevice("+obj.device[length-1].deviceid+","+"&apos;"+obj.device[length-1].name+"&apos;"+","+"&apos;"+obj.device[length-1].description+"&apos;"+","+obj.device[length-1].tagidentification+","+obj.device[length-1].locationid+","+"&apos;"+obj.device[length-1].image+"&apos;"+")' ><div class='card-media'><img src='"+obj.device[length-1].image+"'><div class='card-media-overlay'><div class='card-title has-supporting-text'><h3 class='nd2-subhead clr-white'>"+obj.device[length-1].name+"</h3></div></div></div></a><div class='card-action'><div class='row between-xs'><div class='col-xs-12 align-right'><div class='box'><button onclick='editdevice("+obj.device[length-1].deviceid+","+"&apos;"+obj.device[length-1].name+"&apos;"+","+"&apos;"+obj.device[length-1].description+"&apos;"+","+obj.device[length-1].tagidentification+","+obj.device[length-1].locationid+","+"&apos;"+obj.device[length-1].image+"&apos;"+")' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-edit '></i></button><button onclick='deleteDevice("+obj.device[length-1].deviceid+","+"&apos;"+obj.device[length-1].name+"&apos;"+","+"&apos;"+obj.device[length-1].description+"&apos;"+","+obj.device[length-1].tagidentification+","+obj.device[length-1].locationid+","+"&apos;"+obj.device[length-1].image+"&apos;"+")' data-rel='popup' data-position-to='window' data-role='button' data-inline='true' data-transition='pop' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-delete '></i></button><a href='singledevicemap.html?placename="+obj.device[length-1].deviceid+"' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-pin clr-red'></i></a></div></div></div></div></div></div></div></div></div>";
		              	}
		              	else{
		              		

		              	result+="<div class='row'><div class='col-xs-6'><div class='box'><div class='nd2-card'><a href='#' onclick='viewDevice("+obj.device[length-1].deviceid+","+"&apos;"+obj.device[length-1].name+"&apos;"+","+"&apos;"+obj.device[length-1].description+"&apos;"+","+obj.device[length-1].tagidentification+","+obj.device[length-1].locationid+","+"&apos;"+obj.device[length-1].image+"&apos;"+")' ><div class='card-media'><img src='"+obj.device[length-1].image+"'><div class='card-media-overlay'><div class='card-title has-supporting-text'><h3 class='nd2-subhead clr-white'>"+obj.device[length-1].name+"</h3></div></div></div></button><div class='card-action'><div class='row between-xs'><div class='col-xs-12 align-right'><div class='box'><button onclick='editdevice("+obj.device[length-1].deviceid+","+"&apos;"+obj.device[length-1].name+"&apos;"+","+"&apos;"+obj.device[length-1].description+"&apos;"+","+obj.device[length-1].tagidentification+","+obj.device[length-1].locationid+","+"&apos;"+obj.device[length-1].image+"&apos;"+")' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-edit '></i></button></button><button  onclick='deleteDevice("+obj.device[length-1].deviceid+","+"&apos;"+obj.device[length-1].name+"&apos;"+","+"&apos;"+obj.device[length-1].description+"&apos;"+","+obj.device[length-1].tagidentification+","+obj.device[length-1].locationid+","+"&apos;"+obj.device[length-1].image+"&apos;"+")' data-rel='popup' data-position-to='window' data-role='button' data-inline='true' data-transition='pop' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-delete '></i></button><a href='singledevicemap.html?placename="+obj.device[length-2].deviceid+"' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-pin clr-red'></i></a></div></div></div></div></div></div></div><div class='col-xs-6'><div class='box'><div class='nd2-card'><a href='#' onclick='viewDevice("+obj.device[length-2].deviceid+","+"&apos;"+obj.device[length-2].name+"&apos;"+","+"&apos;"+obj.device[length-2].description+"&apos;"+","+obj.device[length-2].tagidentification+","+obj.device[length-2].locationid+","+"&apos;"+obj.device[length-2].image+"&apos;"+")'><div class='card-media'><img src='"+obj.device[length-2].image+"'><div class='card-media-overlay'><div class='card-title has-supporting-text'><h3 class='nd2-subhead clr-white'>"+obj.device[length-2].name+"</h3></div></div></div><div class='card-action'><div class='row between-xs'><div class='col-xs-12 align-right'><div class='box'><button onclick='editdevice("+obj.device[length-2].deviceid+","+"&apos;"+obj.device[length-2].name+"&apos;"+","+"&apos;"+obj.device[length-2].description+"&apos;"+","+obj.device[length-2].tagidentification+","+obj.device[length-2].locationid+","+"&apos;"+obj.device[length-2].image+"&apos;"+")' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-edit '></i></button><button onclick='deleteDevice("+obj.device[length-2].deviceid+","+"&apos;"+obj.device[length-2].name+"&apos;"+","+"&apos;"+obj.device[length-2].description+"&apos;"+","+obj.device[length-2].tagidentification+","+obj.device[length-2].locationid+","+"&apos;"+obj.device[length-2].image+"&apos;"+")' data-rel='popup' data-position-to='window' data-role='button' data-inline='true' data-transition='pop' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-delete '></i></button><a href='singledevicemap.html?placename="+obj.device[length-2].deviceid+"' class='ui-btn ui-btn-inline ui-btn-fab'><i class='zmdi zmdi-pin clr-red'></i></a></div></div></div></div></div></div></div></div>";
		              }
		                 
		             
		               length-=2;
		             }
		        
		             devices.innerHTML=result;
	
		        }
		      }
		    }
		    

		 

		</script>


	</body>
</html>
